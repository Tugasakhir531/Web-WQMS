<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="dashboard.css" />
  </head>

  <body>
    <div class="wrapper">
      <aside id="sidebar">
        <div class="d-flex">
          <button class="toggle-btn" type="button">
            <i class="lni lni-menu"></i>
          </button>
          <div class="sidebar-logo">
            <a href="#">Internet of Things</a>
          </div>
        </div>
        <ul class="sidebar-nav">
          <li class="sidebar-item">
            <a href="#" class="sidebar-link active">
              <i class="lni lni-dashboard"></i>
              <span class="dash">Dashboard</span>
            </a>
          </li>
          <li class="sidebar-item">
            <a href="../grafik/grafik.html" class="sidebar-link">
              <i class="lni lni-display"></i>
              <span>Grafik</span>
            </a>
          </li>
        </ul>
        <div class="sidebar-footer">
          <a href="../index.html" class="sidebar-link">
            <i class="lni lni-exit"></i>
            <span>Logout</span>
          </a>
        </div>
      </aside>
      <div class="main p-3">
        <h1 class="text-center">Monitoring Kualitas Air Tanah</h1>
        <div class="container">
          <div class="item suhu">
            <h2>Suhu</h2>
            <div class="box m-1">
              <p id="temp">25</p>
              <!-- <img src="temperature.svg" alt="" /> -->
            </div>
          </div>
          <div class="item ph">
            <h2>Ph</h2>
            <div class="box m-1">
              <p id="ph">7</p>
              <!-- <img src="water.svg" alt="" /> -->
            </div>
          </div>
          <div class="item tds">
            <h2>TDS</h2>
            <div class="box m-1">
              <p id="tds">500 PPM</p>
            </div>
          </div>
          <div class="item kekeruhan">
            <h2>Kekeruhan</h2>
            <div class="box m-1">
              <p id="kekeruhan">15</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>

    <script src="dashboard.js"></script>

    <!-- <script>
      let data = document.getElementById("temp");
      data.textContent = "100";
    </script> -->

    <!-- the scripts for products you want to access must be added-->

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

    <script type="module">
      // Import the functions you need from the SDKs you need

      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use

      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration here (Do not use the existing configuration)
      const firebaseConfig = {
        apiKey: "AIzaSyDMvshvjpAT2Di9qMOe1lc1iVCP1Q--fgM",
        authDomain: "wqms-81d27.firebaseapp.com",
        databaseURL: "https://wqms-81d27-default-rtdb.firebaseio.com",
        projectId: "wqms-81d27",
        storageBucket: "wqms-81d27.appspot.com",
        messagingSenderId: "49969250289",
        appId: "1:49969250289:web:b490ce775fb2435dbe4e50",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // getting reference to the database
      const database = firebase.database();

      //getting reference to the data we want
      const dataSuhu = database.ref("WQMS/suhu");
      const dataPh = database.ref("WQMS/ph");
      const dataKekeruhan = database.ref("WQMS/turbidity");
      const dataTds = database.ref("WQMS/tds");

      //fetch the data
      dataSuhu.on("value", function (getdata1) {
        const suhu = getdata1.val();

        document.getElementById("temp").innerHTML = suhu + "&#8451;";
      });

      dataPh.on("value", function (getdata1) {
        const ph = getdata1.val();
        document.getElementById("ph").innerHTML = ph;
      });

      dataTds.on("value", function (getdata1) {
        const tds = getdata1.val();
        document.getElementById("tds").innerHTML = tds + " PPM";
      });

      dataKekeruhan.on("value", function (getdata1) {
        const kekeruhan = getdata1.val();
        document.getElementById("kekeruhan").innerHTML = kekeruhan + " NTU";
      });
    </script>
  </body>
</html>
